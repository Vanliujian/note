# Hyperloglog

> 基数：不重复的元素（可以接收误差）

A{1，2，3，4，5}

B{1，3，4，5}

基数为4

> 简介

Hyperloglog 用于基数统计

优点：占用内存是固定的，2^64 不同的元素的基数，只需要废12kb内存！

**网页的 UV（页面访问量），一个人访问网站多次，还算作一个人**

传统方式：set保存用户的id，就可以统计set中的元素数量来判断；

如果保存大量的用户id，传统方式就比较占用空间，目的是基数，而不是保存用户id；

0.81%错误率！统计UV可以忽略不计

```bash
###############################################################
127.0.0.1:6379> pfadd mykey a b c d e f
(integer) 1
127.0.0.1:6379> pfadd mykey2 e f g h i
(integer) 1
127.0.0.1:6379> pfcount mykey
(integer) 6
127.0.0.1:6379> pfcount mykey2
(integer) 5
127.0.0.1:6379> pfcount mykey mykey2  # 统计数量的时候，会自动统计并集的数量
(integer) 9
127.0.0.1:6379> PFMERGE mykey3 mykey mykey2 # 将两个集合的并集放到mykey3中
OK
127.0.0.1:6379> pfcount mykey3
(integer) 9
###############################################################
```

