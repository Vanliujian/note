# 分支操作

1. 什么是分支

   简单理解为副本，但是底层也是指针的引用。

2. 分支操作

   | 命令名称            | 作用                         |
   | ------------------- | ---------------------------- |
   | git branch 分支名   | 创建分支                     |
   | git branch -v       | 查看分支                     |
   | git checkout 分支名 | 切换分支                     |
   | git merge 分支名    | 把指定的分支合并到当前分支上 |

```bash
$ git branch -v
  hot-fix f8d058b first commit
* master  f8d058b first commit

$ git checkout hot-fix
Switched to branch 'hot-fix'
```



# 产生冲突

当在一个分支下修改某个文件并提交后，在另外一个分支下也修改后提交。

进行合并的时候会有提示信息，让我们手动合并。

```bash
星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (hot-fix)
$ vim hello.txt

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (hot-fix)
$ git add hello.txt

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (hot-fix)
$ git commit -m "hot-fix first commit" hello.txt
[hot-fix 27023a1] hot-fix first commit
 1 file changed, 1 insertion(+)

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (hot-fix)
$ git checkout master
Switched to branch 'master'

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master)
$ vim hello.txt

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master)
$ git add hello.txt

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master)
$ git commit -m "master modify" hello.txt
[master a5d2194] master modify
 1 file changed, 1 insertion(+)

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master)
$ git merge hot-fix
Auto-merging hello.txt
CONFLICT (content): Merge conflict in hello.txt
Automatic merge failed; fix conflicts and then commit the result.

//查看一下本地状态，发现还未合并成功
星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master|MERGING)
$ git status
On branch master
You have unmerged paths.
  (fix conflicts and run "git commit")
  (use "git merge --abort" to abort the merge)

Unmerged paths:
  (use "git add <file>..." to mark resolution)
        both modified:   hello.txt

no changes added to commit (use "git add" and/or "git commit -a")
```

```bash
通过查看hello.txt来手动合并
hello world,hello,h
world
woasdhffksdgf
<<<<<<< HEAD	//当前分支
master modify
=======			//要合并的代码
hot-fix modify
>>>>>>> hot-fix
```

修改后再进行添加暂存区并提交本地库，这时候提交就不要带有文件名了。

```shell
星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master|MERGING)
$ git add hello.txt

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master|MERGING)
$ git commit -m "merge"
[master e84088a] merge

星空之尘@DESKTOP-O4PHEC7 MINGW64 /d/gitbash/test/git_demo2 (master)
此时的状态已经变更为master，表示合并成功
```

合并成功后，再返回hot-fix分支，hot-fix分支内容并不会修改



克隆master分支
git clone uri

克隆非master分支
git clone -b uri branchName

将工作空间、暂存区和本地仓库一起会退到某个版本
git reset --hard commitId

将暂存区和本地仓库会退到某个版本，工作空间不变
git reset -- commitId

将本地仓库会退到某个版本，暂存区和工作空间不变
git rest --soft commitId